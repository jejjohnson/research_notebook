
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Jupyter Lab 4 Remote Servers &#8212; Research Notebook</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Bayesian" href="../../notes/bayesian/overview.html" />
    <link rel="prev" title="Conda 4 Remote Servers" href="conda.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../_static/book_v2.jpeg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Research Notebook</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../intro.html">
                    Overview
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Resources
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../resources/python/overview.html">
   Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../resources/python/ides.html">
     Integraded Development Environment (IDE)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../resources/python/stack.html">
     Standard Python Stack
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../resources/python/earthsci_stack.html">
     Earth Science Stack
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../resources/python/dl_stack.html">
     Deep Learning Stack
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../resources/python/scale_stack.html">
     Scaling Stack
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../resources/python/good_code.html">
     Good Code
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../jax_journey/overview.html">
   My JAX Journey
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../jax_journey/ecosystem.html">
     Ecosystem
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../jax_journey/vmap.html">
     vmap
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../jax_journey/jit.html">
     Jit
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../jax_journey/classes.html">
     Classes
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../jax_journey/algorithms/overview.html">
     Algorithms
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../jax_journey/algorithms/bisection.html">
       Bisection search
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../jax_journey/algorithms/kernel_derivatives.html">
       Kernel Derivatives
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../jax_journey/algorithms/gpr.html">
       GP from Scratch
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../jax_journey/gfs_with_jax.html">
       Gaussianization Flows
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="overview.html">
   Remote Computing
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="ssh.html">
     SSH Configuration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="conda.html">
     Conda 4 Remote Servers
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Jupyter Lab 4 Remote Servers
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Notes
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../notes/bayesian/overview.html">
   Bayesian
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/bayesian/intro.html">
     Bayesian: Language of Uncertainty
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/bayesian/gaussian.html">
     Gaussian Distributions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/bayesian/regression.html">
     Regression
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/bayesian/inference/inference.html">
     Solving Hard Integral Problems
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/bayesian/inference/variational_inference.html">
     Variational Inference
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/bayesian/confidence_intervals.html">
     Confidence Intervals
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../notes/concepts/overview.html">
   Sleeper Concepts
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/concepts/notation.html">
     Notation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/concepts/change_of_variables.html">
     Change of Variables
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/concepts/identity_trick.html">
     Identity Trick
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/concepts/inverse_function.html">
     Inverse Function Theorem
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/concepts/jensens.html">
     Jensens Inequality
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/concepts/lin_alg.html">
     Linear Algebra Tricks
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../notes/kernels/overview.html">
   Kernel Methods
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/kernels/kernel_derivatives.html">
     Kernel Derivatives
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../notes/egps/overview.html">
   Uncertain Gaussian Processes
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/egps/predictions.html">
     Uncertain Predictions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/egps/gauss_approx.html">
     Gaussian Approximation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/egps/mcmc.html">
     Monte Carlo Sampling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/egps/taylor.html">
     Linearization (Taylor Expansions)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/egps/moment_matching.html">
     Moment Matching
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/egps/bgplvm.html">
     Bayesian GPLVM
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/egps/error_prop.html">
     Error Propagation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/egps/next.html">
     Next Steps
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../notes/egps/experiments.html">
     Notebooks
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../notes/egps/notebooks/gpytorch_egp_taylor.html">
       Gaussian Process Gradients with GPyTorch
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../notes/info_theory/overview.html">
   Information Theory
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/info_theory/histogram.html">
     Entropy Estimator - Histogram
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../notes/info_theory/experiments/rbig_sample_consistency.html">
     Experiment - RBIG Sample Consistency
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../normalizing_flows/overview.html">
   Normalizing Flows
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../normalizing_flows/lecture_1_ig.html">
     Lecture I - Iterative Gaussianization
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
    <label for="toctree-checkbox-12">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../normalizing_flows/1.0_univariate_gauss.html">
       1.1 - Univariate Gaussianization
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../normalizing_flows/1.1_marginal_gauss.html">
       1.2 - Marginal Gaussianization
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../normalizing_flows/1.2_gaussianization.html">
       1.2 - Iterative Gaussianization
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../normalizing_flows/lecture_2_gf.html">
     Lecture II - Gaussianization Flows
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
    <label for="toctree-checkbox-13">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../normalizing_flows/lecture_3_gfs_pt1_mg.html">
       Parameterized Marginal Gaussianization
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../normalizing_flows/lecture_3_gfs_pt2_rot.html">
       Parameterized Rotations
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../normalizing_flows/lecture_3_gfs_pt3_plane.html">
       Example - 2D Plane
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/jejjohnson/research_notebook"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/jejjohnson/research_notebook/issues/new?title=Issue%20on%20page%20%2Fcontent/tutorials/remote/jlab.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../_sources/content/tutorials/remote/jlab.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#intro">
   Intro
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tldr">
   TLDR
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install-jupyterlab">
   Install JupyterLab
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#environment-yaml-file">
     Environment
     <code class="docutils literal notranslate">
      <span class="pre">
       .yaml
      </span>
     </code>
     file
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-jupyterlab">
   Running JupyterLab
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#advanced-users">
     Advanced Users
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#bash-script">
       Bash Script
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#tmuxp">
       <code class="docutils literal notranslate">
        <span class="pre">
         tmuxp
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#jlab-on-remote-server">
   JLab on Remote Server
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     Advanced Users
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#ssh-config">
       SSH Config
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#tmuxp-config">
       <strong>
        TMUXP
       </strong>
       Config
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       Bash Script
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#jlab-on-slurm">
   JLab on SLURM
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-srun">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       srun
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-sbatch">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       sbatch
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     Advanced Users
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#demo-setup">
       Demo Setup
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id4">
       <strong>
        TMUXP
       </strong>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#slurm-on-jeanzay">
     SLURM on JeanZay
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#ssh">
       SSH
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#advanced-usage">
         Advanced Usage
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id5">
       Advanced Users
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#config">
         Config
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id6">
         <strong>
          TMUXP
         </strong>
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#jlab-on-oar">
   JLab on OAR
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-oarsub">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       oarsub
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-oarsh">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       oarsh
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Jupyter Lab 4 Remote Servers</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#intro">
   Intro
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tldr">
   TLDR
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install-jupyterlab">
   Install JupyterLab
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#environment-yaml-file">
     Environment
     <code class="docutils literal notranslate">
      <span class="pre">
       .yaml
      </span>
     </code>
     file
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-jupyterlab">
   Running JupyterLab
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#advanced-users">
     Advanced Users
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#bash-script">
       Bash Script
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#tmuxp">
       <code class="docutils literal notranslate">
        <span class="pre">
         tmuxp
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#jlab-on-remote-server">
   JLab on Remote Server
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     Advanced Users
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#ssh-config">
       SSH Config
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#tmuxp-config">
       <strong>
        TMUXP
       </strong>
       Config
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       Bash Script
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#jlab-on-slurm">
   JLab on SLURM
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-srun">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       srun
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-sbatch">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       sbatch
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     Advanced Users
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#demo-setup">
       Demo Setup
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id4">
       <strong>
        TMUXP
       </strong>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#slurm-on-jeanzay">
     SLURM on JeanZay
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#ssh">
       SSH
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#advanced-usage">
         Advanced Usage
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id5">
       Advanced Users
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#config">
         Config
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id6">
         <strong>
          TMUXP
         </strong>
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#jlab-on-oar">
   JLab on OAR
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-oarsub">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       oarsub
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-oarsh">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       oarsh
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="jupyter-lab-4-remote-servers">
<h1>Jupyter Lab 4 Remote Servers<a class="headerlink" href="#jupyter-lab-4-remote-servers" title="Permalink to this headline">#</a></h1>
<hr class="docutils" />
<section id="intro">
<h2>Intro<a class="headerlink" href="#intro" title="Permalink to this headline">#</a></h2>
<p>Jupyter Lab (<code class="docutils literal notranslate"><span class="pre">jlab</span></code>) is one of the most popular IDEs for science, data science and machine learning. Firstly, it offers an interactive development environment that greatly speeds up the coding process. Additionally, it also has a lower barrier to entry so many beginners can get started right away. Finally, also serves as an amazing method to document the thought process as it allows others to “walk-through” your code with text, equations, code blocks and visualizations.</p>
<p>Unfortunately/Fortunately, data is getting bigger and computation is getting expensive. So nowadays, most people are <strong>required</strong> to use some sort of lab server <code class="docutils literal notranslate"><span class="pre">jlab</span></code> because laptops do not have the capacity nor the bandwidth to process such large volumes of data efficiently. There exists some built-in solutions like <span class="xref myst"><code class="docutils literal notranslate"><span class="pre">JupyterHub</span></code></span> which just needs a log-in and then your whole Jupyter suite is available. But, I find that they do not offer the necessary level of granularity that is required for many researchers; especially researchers that really want to make their products reproducible. For example, often times it requires images that are spun up which means the users don’t have control over their python environments and also have to keep re-loading their scripts. This is cumbersome and doesn’t promote good practices outside of simple prototyping. You could <a class="reference external" href="https://www.youtube.com/watch?v=9Q6sLbz37gk">argue for</a> or <a class="reference external" href="https://www.youtube.com/watch?v=7jiPeIFXb6U">argue against</a> the notion that Jupyter notebooks are good enough to do good coding practices and there are <a class="reference external" href="https://nbdev.fast.ai/tutorial.html">certainly tools</a> to get around that. I personally find that the ecosystem doesn’t lend itself well to that kind of development.</p>
<p>This guide is meant to demonstrate how one can setup <code class="docutils literal notranslate"><span class="pre">jlab</span></code> oneself. Setting <code class="docutils literal notranslate"><span class="pre">jlab</span></code> up by yourself is definitely more work than the prebuilt solutions. However, once you know how to do (and you know how to automate some of the tedious commands), these skills are transferable to many different setups. As long as there is a remote server and you can have an ssh connection, you can have a <code class="docutils literal notranslate"><span class="pre">jlab</span></code> environment.</p>
</section>
<hr class="docutils" />
<section id="tldr">
<h2>TLDR<a class="headerlink" href="#tldr" title="Permalink to this headline">#</a></h2>
<p>Below is <strong>What You Will Do</strong> in this tutorial:</p>
<ul class="simple">
<li><p>Install JupyterLab on a remote server</p></li>
<li><p>Learn how to launch jobs on SLURM and OAR</p></li>
<li><p>Automate some things to make life easier (e.g. <code class="docutils literal notranslate"><span class="pre">bash</span></code> scripts, <code class="docutils literal notranslate"><span class="pre">tmux</span></code>, <code class="docutils literal notranslate"><span class="pre">tmuxp</span></code>)</p></li>
</ul>
<div class="info admonition">
<p class="admonition-title">MEOM-ers</p>
<p>For my current lab (2022), we have access to 3 servers. Each of them correspond to a server type with varying levels of power and customizability.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cal1</span></code> -&gt; SLURM</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gricad</span></code> -&gt; OAR</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jean-zay</span></code> -&gt; SLURM</p></li>
</ul>
</div>
<hr class="docutils" />
<p><strong>Table of Contents</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="#intro">Intro</a></p></li>
<li><p><a class="reference external" href="#tldr">TLDR</a></p></li>
<li><p><a class="reference external" href="#install-jupyterlab">Install JupyterLab</a></p>
<ul>
<li><p><a class="reference external" href="#environment-yaml-file">Environment <code class="docutils literal notranslate"><span class="pre">.yaml</span></code> file</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#running-jupyterlab">Running JupyterLab</a></p>
<ul>
<li><p><a class="reference external" href="#advanced-users">Advanced Users</a></p>
<ul>
<li><p><a class="reference external" href="#bash-script">Bash Script</a></p></li>
<li><p><a class="reference external" href="#tmuxp"><code class="docutils literal notranslate"><span class="pre">tmuxp</span></code></a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference external" href="#jlab-on-remote-server">JLab on Remote Server</a></p>
<ul>
<li><p><a class="reference external" href="#advanced-users-1">Advanced Users</a></p>
<ul>
<li><p><a class="reference external" href="#ssh-config">SSH Config</a></p></li>
<li><p><a class="reference external" href="#tmuxp-config"><strong>TMUXP</strong> Config</a></p></li>
<li><p><a class="reference external" href="#bash-script-1">Bash Script</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference external" href="#jlab-on-slurm">JLab on SLURM</a></p>
<ul>
<li><p><a class="reference external" href="#using-srun">Using <code class="docutils literal notranslate"><span class="pre">srun</span></code></a></p></li>
<li><p><a class="reference external" href="#using-sbatch">Using <code class="docutils literal notranslate"><span class="pre">sbatch</span></code></a></p></li>
<li><p><a class="reference external" href="#advanced-users-2">Advanced Users</a></p>
<ul>
<li><p><a class="reference external" href="#demo-setup">Demo Setup</a></p></li>
<li><p><a class="reference external" href="#tmuxp-1"><strong>TMUXP</strong></a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#slurm-on-jeanzay">SLURM on JeanZay</a></p>
<ul>
<li><p><a class="reference external" href="#ssh">SSH</a></p>
<ul>
<li><p><a class="reference external" href="#advanced-usage">Advanced Usage</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#advanced-users-3">Advanced Users</a></p>
<ul>
<li><p><a class="reference external" href="#config">Config</a></p></li>
<li><p><a class="reference external" href="#tmuxp-2"><strong>TMUXP</strong></a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference external" href="#jlab-on-oar">JLab on OAR</a></p>
<ul>
<li><p><a class="reference external" href="#using-oarsub">Using <code class="docutils literal notranslate"><span class="pre">oarsub</span></code></a></p></li>
<li><p><a class="reference external" href="#using-oarsh">Using <code class="docutils literal notranslate"><span class="pre">oarsh</span></code></a></p></li>
</ul>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="install-jupyterlab">
<h2>Install JupyterLab<a class="headerlink" href="#install-jupyterlab" title="Permalink to this headline">#</a></h2>
<p>Here, we will walk-through how we can install <code class="docutils literal notranslate"><span class="pre">jupyterlab</span></code> on the servers.</p>
<hr class="docutils" />
<section id="environment-yaml-file">
<h3>Environment <code class="docutils literal notranslate"><span class="pre">.yaml</span></code> file<a class="headerlink" href="#environment-yaml-file" title="Permalink to this headline">#</a></h3>
<p>Below, we have a <code class="docutils literal notranslate"><span class="pre">.yaml</span></code> file for creating a Jupyter Lab environment. To refresh yourself on how this works, have a look at the <a class="reference internal" href="conda.html"><span class="doc std std-doc">conda tutorial</span></a> to more details on the installation.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jlab</span><span class="w"></span>
<span class="nt">channels</span><span class="p">:</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">defaults</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conda-forge</span><span class="w"></span>
<span class="nt">dependencies</span><span class="p">:</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python=3.9</span><span class="w"></span>
<span class="c1"># GUI</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conda-forge::jupyterlab</span><span class="w">           </span><span class="c1"># JupyterLab GUI</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conda-forge::nb_conda_kernels</span><span class="w">     </span><span class="c1"># Access to other conda kernels</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conda-forge::spyder-kernels</span><span class="w">       </span><span class="c1"># Access via spyder kernels</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conda-forge::nodejs</span><span class="w">               </span><span class="c1"># for extensions in jupyterlab</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conda-forge::jupyterlab-git</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conda-forge::jupyter-server-proxy</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conda-forge::ipywidgets</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pyviz::holoviews</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bokeh::bokeh</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bokeh::jupyter_bokeh</span><span class="w">              </span><span class="c1"># Bokeh</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ipykernel</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tqdm</span><span class="w">                              </span><span class="c1"># For status bars</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip</span><span class="w">                               </span><span class="c1"># To install other packages</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pip</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dask_labextension</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We are making a single <em>JupyterLab environment to rule them all</em>. So we are only going to install things that are important for JupyterLab as a jlab <em>base environment</em>. It isn’t necessary to install things like numpy, scipy or even pytorch. We only need to install things like git and server proxies.</p>
<p>However, we still will be able to change the <code class="docutils literal notranslate"><span class="pre">conda_kernel</span></code>. To ensure that we can change it to <em>other environments</em>, we needed to install  <code class="docutils literal notranslate"><span class="pre">nb_conda_kernel</span></code> and <code class="docutils literal notranslate"><span class="pre">ipykernels</span></code> in the <code class="docutils literal notranslate"><span class="pre">jlab</span></code> base environment as well as any other environment that we want access to.</p>
</div>
</section>
</section>
<hr class="docutils" />
<section id="running-jupyterlab">
<h2>Running JupyterLab<a class="headerlink" href="#running-jupyterlab" title="Permalink to this headline">#</a></h2>
<p><strong>Step 1</strong>: Install this as a conda environment. (Use mamba because its faster)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mamba env create -f environment.yaml --prune
</pre></div>
</div>
<p><strong>Step 2</strong>: Activate environment</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda activate jlab
</pre></div>
</div>
<p><strong>Step 3</strong>: Start JupyterLab</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>jupyter-lab --no-browser --ip<span class="o">=</span><span class="m">0</span>.0.0.0 --port<span class="o">=</span><span class="m">8888</span>
</pre></div>
</div>
<p>This will give you a</p>
<hr class="docutils" />
<section id="advanced-users">
<h3>Advanced Users<a class="headerlink" href="#advanced-users" title="Permalink to this headline">#</a></h3>
<p>This will allow users to not have to go through all of those above steps each time we want to log in. Instead, we will create a function that automates this for us which will greatly reduce the amount of steps. We will also</p>
<section id="bash-script">
<h4>Bash Script<a class="headerlink" href="#bash-script" title="Permalink to this headline">#</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Launch Jupyter Lab</span>
<span class="k">function</span> jlab<span class="o">(){</span>
    <span class="c1"># set port (default)</span>
    <span class="nv">port</span><span class="o">=</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">8888</span><span class="si">}</span>
    <span class="c1"># activate jupyter-lab</span>
    conda activate jlab
    <span class="c1"># Fires-up a Jupyter notebook by supplying a specific port</span>
    jupyter-lab --no-browser --ip<span class="o">=</span><span class="m">0</span>.0.0.0 --port<span class="o">=</span><span class="nv">$port</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Add this function to your <code class="docutils literal notranslate"><span class="pre">.profile</span></code> or <code class="docutils literal notranslate"><span class="pre">.bash_profile</span></code>.</p>
<p><strong>Example Usage</strong></p>
<p>Since everything is within the function, we just need to run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># activate conda environment and start jlab</span>
jlab <span class="m">8888</span>
</pre></div>
</div>
<p><strong>That was easy</strong>! Just a little bit of customization goes a long way.</p>
</section>
<section id="tmuxp">
<h4><code class="docutils literal notranslate"><span class="pre">tmuxp</span></code><a class="headerlink" href="#tmuxp" title="Permalink to this headline">#</a></h4>
<p>This is the demo for <code class="docutils literal notranslate"><span class="pre">tmuxp</span></code> users.</p>
<p>Below is my demo <strong><code class="docutils literal notranslate"><span class="pre">jlab.yaml</span></code></strong> file which has the automated commands for <code class="docutils literal notranslate"><span class="pre">tmuxp</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>session_name: cal1_jlab
windows:
  - window_name: jlab
    panes:
    - shell_command: <span class="p">|</span>
        <span class="nb">cd</span> <span class="nv">$WORKDIR</span>
        jlab <span class="m">8888</span>
</pre></div>
</div>
<p><strong>Demo Usage</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tmuxp load <span class="nv">$HOME</span>/.tmuxp/jlab.yaml
</pre></div>
</div>
<p>As you can see, it is <strong>super simple</strong> to use! Just this command, we get a nice <code class="docutils literal notranslate"><span class="pre">tmux</span></code> window with <code class="docutils literal notranslate"><span class="pre">jlab</span></code> running and even an extra window for tinkering. But of course, we need to add a function to our local <code class="docutils literal notranslate"><span class="pre">.profile</span></code> so that we don’t have to type all of this out.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">function</span> tmux_jlab<span class="o">(){</span>
  tmuxp load <span class="nv">$HOME</span>/.tmuxp/jlab.yaml
<span class="o">}</span>
</pre></div>
</div>
<p><strong>Demo Usage</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tmux_jlab
</pre></div>
</div>
<p><strong>Even easier</strong>! Now we just type this command and we get a full tmux session where the ssh command has been run and the jlab session should already be activated on the remote server. We just need to go to <code class="docutils literal notranslate"><span class="pre">localhost:8888</span></code> in our browser and we are good to go.</p>
</section>
</section>
</section>
<hr class="docutils" />
<section id="jlab-on-remote-server">
<h2>JLab on Remote Server<a class="headerlink" href="#jlab-on-remote-server" title="Permalink to this headline">#</a></h2>
<p>So the <strong>only difference</strong> between what we did above and what we do now</p>
<p>So the actual commands are quite similar. But they have different steps:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"># log into remote server</span>
<span class="gi">+ ssh username@server -L 8888:localhost:8888</span><span class="w"></span>
<span class="w"># launch jlab via script</span>
<span class="w">jlab 8888</span>
</pre></div>
</div>
<hr class="docutils" />
<section id="id1">
<h3>Advanced Users<a class="headerlink" href="#id1" title="Permalink to this headline">#</a></h3>
<p>There are some shortcuts we can apply based on our previous stuff. We will do the following:</p>
<ol class="simple">
<li><p>Setup the <code class="docutils literal notranslate"><span class="pre">.ssh/config</span></code> to streamline the <code class="docutils literal notranslate"><span class="pre">ssh</span></code> flags</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">tmuxp</span></code> to streamline the <code class="docutils literal notranslate"><span class="pre">ssh</span></code> and <code class="docutils literal notranslate"><span class="pre">jlab</span></code> execution</p></li>
<li><p>Write a <code class="docutils literal notranslate"><span class="pre">bash</span></code> script to execute the <code class="docutils literal notranslate"><span class="pre">tmuxp</span></code> commands</p></li>
</ol>
<hr class="docutils" />
<section id="ssh-config">
<h4>SSH Config<a class="headerlink" href="#ssh-config" title="Permalink to this headline">#</a></h4>
<p>If we have the server information already preconfigured in our <code class="docutils literal notranslate"><span class="pre">.ssh/config</span></code> file, then we can remove a lot of these redundant commands.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Host server_name
    HostName server
    User username
    <span class="c1"># Allow for Ids</span>
    ForwardX11 yes
    <span class="c1"># SSH Identity File</span>
    IdentityFile ~/.ssh/id_key_file
    <span class="c1"># Jupyter Notebooks</span>
    LocalForward <span class="m">8888</span> localhost:8888
</pre></div>
</div>
<p>The most important are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Host</span></code> - makes an easier to remember ssh command</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IdentityFile</span></code> - removes the need to authenticate</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LocalForward</span></code>/<code class="docutils literal notranslate"><span class="pre">localhost</span></code> - does the tunneling automatically</p></li>
</ul>
<p>Take a look at the changes when we have this setup.</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"># log into remote server</span>
<span class="gd">- ssh username@server -L 8888:localhost:8888</span><span class="w"></span>
<span class="gi">+ ssh server_name</span><span class="w"></span>
<span class="w"># launch jlab via script</span>
<span class="w">jlab 8888</span>
</pre></div>
</div>
<p><strong>Note</strong>: We could also remove the exact port number since this port number is configured to be the same within the <code class="docutils literal notranslate"><span class="pre">.ssh/config</span></code> file. So the result is the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh server_name
jlab
</pre></div>
</div>
<p><strong>Voila</strong>! Super simple! :)</p>
</section>
<hr class="docutils" />
<section id="tmuxp-config">
<h4><strong>TMUXP</strong> Config<a class="headerlink" href="#tmuxp-config" title="Permalink to this headline">#</a></h4>
<p>We can create a <code class="docutils literal notranslate"><span class="pre">tmux</span></code> environment where we create windows to run commands where everything has already been executed. Below is my demo <strong><code class="docutils literal notranslate"><span class="pre">jlab_cal1.yaml</span></code></strong> file which has the automated commands for <code class="docutils literal notranslate"><span class="pre">tmuxp</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>session_name: cal1_jlab
windows:
  - window_name: jlab
    panes:
    - shell_command: <span class="p">|</span>
        ssh meom_cal1
        <span class="nb">cd</span> <span class="nv">$WORKDIR</span>
        sbatch <span class="nv">$HOMEDIR</span>/bin/jlab_sbatch.sh

  - window_name: git
    panes:
    - shell_command: ssh meom_cal1
</pre></div>
</div>
<p><strong>Demo Usage</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tmuxp load jlab_cal1.yaml
</pre></div>
</div>
<p>As you can see, it is <strong>super simple</strong> to use! Just this command, we get a nice <code class="docutils literal notranslate"><span class="pre">tmux</span></code> window with <code class="docutils literal notranslate"><span class="pre">jlab</span></code> running and even an extra window for tinkering.</p>
</section>
<hr class="docutils" />
<section id="id2">
<h4>Bash Script<a class="headerlink" href="#id2" title="Permalink to this headline">#</a></h4>
<p>Now, the final step, we want to not have to write all of those commands. So we create a nice little bash script that does everything. Remember to add it to your <code class="docutils literal notranslate"><span class="pre">.profile</span></code> and restart your terminal.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">function</span> jlab_cal1<span class="o">(){</span>
  tmuxp load <span class="nv">$HOME</span>/.tmuxp/jlab_cal1.yaml
<span class="o">}</span>
</pre></div>
</div>
<p><strong>Demo Usage</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>jlab_cal1
</pre></div>
</div>
<p><strong>It’s as easy as it gets!</strong></p>
</section>
</section>
</section>
<hr class="docutils" />
<section id="jlab-on-slurm">
<h2>JLab on SLURM<a class="headerlink" href="#jlab-on-slurm" title="Permalink to this headline">#</a></h2>
<p>In this section, we will take what we did above and apply it to a cluster managed by SLURM. The biggest difference in steps is that we first need to log into the remote server, then we need to start a compute node, and then we can apply the steps for the jlab:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"># ssh into the remote server</span>
<span class="gi">+ ssh username@server -L 8888:localhost:8888</span><span class="w"></span>
<span class="w"># start an interactive compute session</span>
<span class="gi">+ srun ... or + sbatch</span><span class="w"></span>
<span class="w"># start jupyter lab environment</span>
<span class="w">conda activate jlab</span>
<span class="w"># Fires-up a Jupyter notebook by supplying a specific port</span>
<span class="w">jupyter-lab --no-browser --ip=0.0.0.0 --port=8888</span>
</pre></div>
</div>
<p>Now we can open our browser to <code class="docutils literal notranslate"><span class="pre">localhost:8888</span></code> and we will have access to <code class="docutils literal notranslate"><span class="pre">jlab</span></code>. We have two ways to do this: 1) we can use <code class="docutils literal notranslate"><span class="pre">srun</span></code> which will start an interactive node or 2) <code class="docutils literal notranslate"><span class="pre">sbatch</span></code> which will start a node based on a <code class="docutils literal notranslate"><span class="pre">bash</span></code> script with the configurations. We will go over both options below.</p>
<hr class="docutils" />
<section id="using-srun">
<h3>Using <code class="docutils literal notranslate"><span class="pre">srun</span></code><a class="headerlink" href="#using-srun" title="Permalink to this headline">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># log into remote server</span>
ssh username@server -L <span class="m">8888</span>:localhost:8888
<span class="c1"># activate conda environment</span>
conda activate jlab
<span class="c1"># start an interactive node (apply configs)</span>
srun --nodes<span class="o">=</span><span class="m">1</span> --cpus-per-task<span class="o">=</span><span class="m">8</span> --mem<span class="o">=</span><span class="m">1600</span> --account<span class="o">=</span>python --pty jupyter-lab --no-browser --ip<span class="o">=</span><span class="m">0</span>.0.0.0 --port<span class="o">=</span><span class="m">8888</span>
</pre></div>
</div>
<p>Again, now we can open our browser to <code class="docutils literal notranslate"><span class="pre">localhost:8888</span></code> and we will have access to <code class="docutils literal notranslate"><span class="pre">jlab</span></code>.</p>
</section>
<hr class="docutils" />
<section id="using-sbatch">
<h3>Using <code class="docutils literal notranslate"><span class="pre">sbatch</span></code><a class="headerlink" href="#using-sbatch" title="Permalink to this headline">#</a></h3>
<p>In this case, we will create a script and then launch the job using the <code class="docutils literal notranslate"><span class="pre">sbatch</span></code> command.</p>
<p><strong>Pros</strong>:</p>
<ul class="simple">
<li><p>It really allows you to customize the nitty gritty details of the compute node environment.</p></li>
<li><p>It launches in the background.</p></li>
</ul>
<p><strong>Cons</strong>:</p>
<ul class="simple">
<li><p>It’s not very easy to do. You have to have access to the nitty-gritty details.</p></li>
<li><p>Sometimes you cannot ssh into the compute node.</p></li>
</ul>
<p>Below is an example of a <code class="docutils literal notranslate"><span class="pre">bash</span></code> script, titled <code class="docutils literal notranslate"><span class="pre">jlab_sbatch.sh</span></code> which has the appropriate commands.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --job-name=jlab                     # name of job</span>
<span class="c1">#SBATCH --account=python                    # for statistics</span>
<span class="c1">#SBATCH --export=ALL                        # export all environment variables</span>
<span class="c1">#SBATCH --nodes=1                           # we ALWAYS request one node</span>
<span class="c1">#SBATCH --cpus-per-task=8                   # number of cpus per task</span>
<span class="c1">#SBATCH --time=8:00:00                      # maximum execution time requested (HH:MM:SS)</span>
<span class="c1">#SBATCH --memory=1600                       # the amount of memory requested</span>

<span class="c1"># get tunneling info</span>
<span class="nv">XDG_RUNTIME_DIR</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<span class="nv">port</span><span class="o">=</span><span class="m">8888</span>

<span class="c1"># loading of modules</span>
conda activate jlab
<span class="c1"># code execution</span>
jupyter-lab --no-browser --port<span class="o">=</span><span class="si">${</span><span class="nv">port</span><span class="si">}</span> --ip<span class="o">=</span><span class="m">0</span>.0.0.0 --notebook-dir<span class="o">=</span><span class="nv">$WORKDIR</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="id3">
<h3>Advanced Users<a class="headerlink" href="#id3" title="Permalink to this headline">#</a></h3>
<p>For interactive sessions with <code class="docutils literal notranslate"><span class="pre">srun</span></code>, I strongly recommend the use of functions to ensure that your configurations are correct. We can turn the above steps on the server into a script so that we don’t have to keep running these same commands.</p>
<section id="demo-setup">
<h4>Demo Setup<a class="headerlink" href="#demo-setup" title="Permalink to this headline">#</a></h4>
<p>Add this function to your <code class="docutils literal notranslate"><span class="pre">.profile</span></code> or <code class="docutils literal notranslate"><span class="pre">.bash_profile</span></code> <strong>on the remote server</strong>.</p>
<p><strong>Demo Usage</strong>:</p>
<p>I am assume that we have already configured our <code class="docutils literal notranslate"><span class="pre">.ssh/config</span></code> file as done above.</p>
<p>This is a low easier and less cumbersome than typing out all of the commands from scratch.</p>
</section>
<section id="id4">
<h4><strong>TMUXP</strong><a class="headerlink" href="#id4" title="Permalink to this headline">#</a></h4>
<p>We can make this even easier with <code class="docutils literal notranslate"><span class="pre">tmuxp</span></code>. We need to create a <code class="docutils literal notranslate"><span class="pre">.yaml</span></code> file which will store all the commands to be executed. Here is an example for <code class="docutils literal notranslate"><span class="pre">jlab_cal1.yaml</span></code>.</p>
<p><strong>Demo Usage</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tmuxp load jlab_cal1.yaml
</pre></div>
</div>
<p>And as we did before, we can create a function in our local <code class="docutils literal notranslate"><span class="pre">.profile</span></code> that will allow us to run these commands with even greater brevity.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">function</span> jlab_cal1<span class="o">(){</span>
  tmuxp load jlab_cal1.yaml
<span class="o">}</span>
</pre></div>
</div>
<p>So now it’s even easier to run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>jlab_cal1
</pre></div>
</div>
<p><strong>Super easy</strong>! :)</p>
</section>
</section>
<hr class="docutils" />
<section id="slurm-on-jeanzay">
<h3>SLURM on JeanZay<a class="headerlink" href="#slurm-on-jeanzay" title="Permalink to this headline">#</a></h3>
<p>We have to do the same as above however there are a few different commands we need to take care of which allow for more customization. Furthermore, we now have access to</p>
<section id="ssh">
<h4>SSH<a class="headerlink" href="#ssh" title="Permalink to this headline">#</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sshuttle</span> <span class="o">-</span><span class="n">dns</span> <span class="o">-</span><span class="n">HN</span> <span class="o">-</span><span class="n">r</span> <span class="n">meom_cal1</span> <span class="mf">130.84.132.0</span><span class="o">/</span><span class="mi">24</span>
</pre></div>
</div>
<p><strong>Demo Usage</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sshuttle
</pre></div>
</div>
<section id="advanced-usage">
<h5>Advanced Usage<a class="headerlink" href="#advanced-usage" title="Permalink to this headline">#</a></h5>
</section>
</section>
<hr class="docutils" />
<section id="id5">
<h4>Advanced Users<a class="headerlink" href="#id5" title="Permalink to this headline">#</a></h4>
<section id="config">
<h5>Config<a class="headerlink" href="#config" title="Permalink to this headline">#</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">meom_cal1.conf</span></code> file looks like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">130</span>.84.132.0/24
--remote
meom_cal1
</pre></div>
</div>
<p><strong>Demo Usage</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sshuttle --dns -HN @meom_cal1.conf
</pre></div>
</div>
<p>And of course, we will create a nice little function for it.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">function</span> sshuttle_cal1<span class="o">(){</span>
  sshuttle --dns -HN @meom_cal1.conf
<span class="o">}</span>
</pre></div>
</div>
<p><strong>Demo Usage</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sshuttle_cal1
</pre></div>
</div>
</section>
<section id="id6">
<h5><strong>TMUXP</strong><a class="headerlink" href="#id6" title="Permalink to this headline">#</a></h5>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>session_name: jlab_jz_gpu
windows:
  - window_name: jlab
    panes:
    - shell_command: <span class="p">|</span>
        ssh jean_zay
        <span class="nb">cd</span> <span class="nv">$WORKDIR</span>
        sbatch <span class="nv">$HOMEDIR</span>/bin/jlab_gpu.sh

  - window_name: vpn
    panes:
    - shell_command: sshuttle --dns -HN @<span class="nv">$HOME</span>/.sshuttle/meom_cal1.conf
  
</pre></div>
</div>
<p><strong>Demo Usage</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tmuxp load jlab_jz.yaml
</pre></div>
</div>
<p>And again, a function:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">function</span> jlab_jz<span class="o">(){</span>
  tmuxp load jlab_jz.yaml
<span class="o">}</span>
</pre></div>
</div>
<p><strong>Demo Usage</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>jlab_jz
</pre></div>
</div>
<p><strong>As easy as it gets</strong>!</p>
</section>
</section>
</section>
</section>
<hr class="docutils" />
<section id="jlab-on-oar">
<h2>JLab on OAR<a class="headerlink" href="#jlab-on-oar" title="Permalink to this headline">#</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>We can’t actually launch jupyter-lab on the head node. Well, technically we can but it will kill the process almost immediately. You must use the compute nodes to do all computation.</p>
</div>
<hr class="docutils" />
<section id="using-oarsub">
<h3>Using <code class="docutils literal notranslate"><span class="pre">oarsub</span></code><a class="headerlink" href="#using-oarsub" title="Permalink to this headline">#</a></h3>
<p>First, take a look at this tutorial to get familiar: <a class="reference external" href="https://gricad-doc.univ-grenoble-alpes.fr/notebook/hpcnb/">https://gricad-doc.univ-grenoble-alpes.fr/notebook/hpcnb/</a></p>
<p>Below offers a simpler work structure.</p>
<p><strong>In the First Terminal</strong> - Start the JupyterLab session</p>
<ol class="simple">
<li><p>Log into your server</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh f-dahu.ciment
</pre></div>
</div>
<ol class="simple">
<li><p>Start an interactive session</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>oarsub -I --project data-ocean -l /core<span class="o">=</span><span class="m">10</span>,walltime<span class="o">=</span><span class="m">2</span>:00:00 -&gt; it will log automatically on a login node dahuX
</pre></div>
</div>
<ol class="simple">
<li><p>Activate your conda environment with JupyterLab</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="n">pangeo</span>
</pre></div>
</div>
<ol class="simple">
<li><p>Start your jupyterlab session</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>jupyter notebook/lab
</pre></div>
</div>
<p><strong>Tip</strong>: It’s highly advised to open a session using tmux or screen when running these commands. This will allow you to have things running in the background even if you’re not logged into the server.</p>
<p><strong>In the second terminal</strong> - we will do the ssh tunneling procedure to view jupyterlab on your local machine.</p>
<ol class="simple">
<li><p>Do the Tunneling</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh -fNL <span class="m">8888</span>:dahuX:8888  <span class="o">[</span> -L <span class="m">8686</span>:dahuX:8686 <span class="k">for</span> the dashboard<span class="o">]</span> dahu.ciment
</pre></div>
</div>
<ol class="simple">
<li><p>Open <code class="docutils literal notranslate"><span class="pre">http://localhost:8888/?token=...(see</span> <span class="pre">the</span> <span class="pre">result</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">jupyter</span> <span class="pre">notebook</span> <span class="pre">command)</span></code> on a browser in your laptop.</p></li>
<li><p>When you’re done, make sure you close the tunnel you opened.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># get the process-ID number for ssh tunneling</span>
lsof -i :portNumber
<span class="c1"># kill that process</span>
<span class="nb">kill</span> -9 PID
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="using-oarsh">
<h3>Using <code class="docutils literal notranslate"><span class="pre">oarsh</span></code><a class="headerlink" href="#using-oarsh" title="Permalink to this headline">#</a></h3>
<p>Sometimes, it’s a bit annoying to have to keep track of everything (launching interactive job + run jupyter notebook/lab + create tunnel, etc). So below is a way to create a simple script that helps automate the process a little bit.</p>
<p>Firstly, we need a bash script which can easily be launched. Below is an example.</p>
<details>
<summary>
jlab_bash.sh
</summary>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#OAR --name jlab_cpu</span>
<span class="c1">#OAR --project pr-data-ocean</span>
<span class="c1">#OAR -l /nodes=1,walltime=10:00:00</span>
<span class="c1">#OAR --stdout /bettik/username/logs/jupyterlab_cpu.log</span>
<span class="c1">#OAR --stderr /bettik/username/errs/jupyterlab_cpu.err</span>

<span class="c1"># get tunneling info</span>
<span class="nv">XDG_RUNTIME_DIR</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<span class="nv">node</span><span class="o">=</span><span class="k">$(</span>hostname -s<span class="k">)</span>
<span class="nv">user</span><span class="o">=</span><span class="k">$(</span>whoami<span class="k">)</span>
<span class="nv">cluster</span><span class="o">=</span><span class="s2">&quot;dahu_ciment&quot;</span>
<span class="nv">port</span><span class="o">=</span><span class="m">3008</span>

<span class="c1"># print tunneling instructions jupyter-log</span>
<span class="nb">echo</span> -e <span class="s2">&quot;</span>
<span class="s2"># Tunneling Info</span>
<span class="s2">node=</span><span class="si">${</span><span class="nv">node</span><span class="si">}</span><span class="s2"></span>
<span class="s2">user=</span><span class="si">${</span><span class="nv">user</span><span class="si">}</span><span class="s2"></span>
<span class="s2">cluster=</span><span class="si">${</span><span class="nv">cluster</span><span class="si">}</span><span class="s2"></span>
<span class="s2">port=</span><span class="si">${</span><span class="nv">port</span><span class="si">}</span><span class="s2"></span>
<span class="s2">Command to create ssh tunnel:</span>
<span class="s2">ssh -N -f -L </span><span class="si">${</span><span class="nv">port</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">node</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">port</span><span class="si">}</span><span class="s2"> </span><span class="si">${</span><span class="nv">cluster</span><span class="si">}</span><span class="s2"></span>
<span class="s2">Command to create ssh tunnel through</span>
<span class="s2">ssh -N -f -L </span><span class="si">${</span><span class="nv">port</span><span class="si">}</span><span class="s2">:localhost:</span><span class="si">${</span><span class="nv">port</span><span class="si">}</span><span class="s2"> </span>$<span class="s2"></span>
<span class="s2">Use a Browser on your local machine to go to:</span>
<span class="s2">localhost:</span><span class="si">${</span><span class="nv">port</span><span class="si">}</span><span class="s2">  (prefix w/ https:// if using password)</span>
<span class="s2">&quot;</span>


<span class="c1"># load modules or conda environments here with jupyterlab</span>
<span class="nb">source</span> activate jlab

jupyter lab --no-browser --ip<span class="o">=</span><span class="m">0</span>.0.0.0 --port<span class="o">=</span><span class="si">${</span><span class="nv">port</span><span class="si">}</span>
</pre></div>
</div>
</details>
<p><strong>Note I</strong>: make sure you create the <code class="docutils literal notranslate"><span class="pre">/logs/</span></code> and the <code class="docutils literal notranslate"><span class="pre">/errs</span></code> directory so that you can get the command to run the tunneling procedure as well as be able to debug if the script crashes for whatever reason.</p>
<hr class="docutils" />
<p>Now here are the instructions for using it:</p>
<ol class="simple">
<li><p>Launch the script with <code class="docutils literal notranslate"><span class="pre">oarsub</span></code></p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># set permissions for the script (DO THIS ONE TIME)</span>
chmod +x /path/to/bash/script/bash_script.sh
<span class="c1"># launch the script</span>
oarsub -S /path/to/bash/script/bash_script.sh
</pre></div>
</div>
<ol class="simple">
<li><p>Open Port with the server name</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a tunnel</span>
ssh -N -f -L port_number:node_name:port_number server_name
</pre></div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content/tutorials/remote"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="conda.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Conda 4 Remote Servers</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../../notes/bayesian/overview.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Bayesian</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By J. Emmanuel Johnson<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>